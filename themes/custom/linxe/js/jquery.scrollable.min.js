!function(e,t){var l="scrollable",n=function(t,n){if(!n.data(l)){var i=new e.scrollable(e.extend({},e.fn.scrollable.defaults,t));n.data(l,i),i.init(n)}return n.data(l)};e.scrollable=function(t){null==t&&(t=e.fn.scrollable.defaults),this.options=t},e.extend(e.scrollable.prototype,{init:function(t){this.element=t.css("overflow","hidden"),this.element.addClass("scrollable"),this.element.wrapInner('<div class="scrollable-area" />'),this.element.wrapInner('<div class="scrollable-container" />'),this.scrollableArea=this.element.find(".scrollable-area:eq(0)"),this.scrollableContainer=this.element.find(".scrollable-container:eq(0)"),this.scrolling={x:{container:null,handle:null},y:{container:null,handle:null}},this.updateContainer(),this.lastWidth=this.getAreaSize("width"),this.lastHeight=this.getAreaSize("height");var l=this;e(window).on("resize",function(){l.updateContainer(),l.updateArea()}),this.element.on("update",function(){l.updateContainer(),l.updateArea(),l.options.onUpdate()}),this.options.autoHide&&this.element.addClass("autohide"),this.element.on("mouseover",function(){l.element.addClass("hover")}),this.element.on("mouseout",function(){l.element.removeClass("hover")}),setInterval(function(){l.lastWidth==l.getAreaSize("width")&&l.lastHeight==l.getAreaSize("height")||(l.element.trigger("update"),l.lastWidth=l.getAreaSize("width"),l.lastHeight=l.getAreaSize("height"))},500),this.options.mouseWheel&&this.element.on("mousewheel",function(e){var t=e.deltaFactor;if(t>=l.options.mouseWheelMaxDelta&&(t=l.options.mouseWheelMaxDelta),0!=e.deltaY&&null!=l.scrolling.y.handle&&l.getOffset("top",l.scrolling.y.handle)>=0){!0!==l.options.transferScrolling&&e.preventDefault();var n=l.getOffset("top",l.scrolling.y.handle)+e.deltaY*t*-1;(n=(n=n<=0?0:n)+l.scrolling.y.handle.height()>=l.scrolling.y.container.height()?l.scrolling.y.container.height()-l.scrolling.y.handle.height():n)!=l.getOffset("top",l.scrolling.y.handle)&&(e.preventDefault(),e.stopImmediatePropagation()),l.scrolling.y.handle.css("top",n),l.moveArea({top:n},"y")}if(0!=e.deltaX&&null!=l.scrolling.x.handle&&l.getOffset("left",l.scrolling.x.handle)>=0){!0!==l.options.transferScrolling&&e.preventDefault(),e.preventDefault();var i=l.getOffset("left",l.scrolling.x.handle)+e.deltaX*t;(i=(i=i<=0?0:i)+l.scrolling.x.handle.width()>=l.scrolling.x.container.width()?l.scrolling.x.container.width()-l.scrolling.x.handle.width():i)!=l.getOffset("left",l.scrolling.y.handle)&&(e.preventDefault(),e.stopImmediatePropagation()),l.scrolling.x.handle.css("left",i),l.moveArea({left:i},"x")}})},getOffset:function(e,t){return"auto"==t.css(e)?0:parseInt(t.css(e))},getAreaSize:function(e){return"width"==e?this.scrollableArea.prop("scrollWidth"):this.scrollableArea.prop("scrollHeight")},updateScrollbars:function(){this.scrollableContainer.width()<this.getAreaSize("width")?null==this.scrolling.x.container&&this.drawScrollbar("x"):null!=this.scrolling.x.container&&(this.scrolling.x.container.parent().remove(),this.scrolling.x.handle=null,this.scrolling.x.container=null),this.scrollableContainer.height()<this.scrollableArea.height()?null==this.scrolling.y.container&&this.drawScrollbar("y"):null!=this.scrolling.y.container&&(this.scrolling.y.container.parent().remove(),this.scrolling.y.handle=null,this.scrolling.y.container=null),this.updateHandleSize()},updateContainer:function(){this.element.is("body")?(this.scrollableContainer.width(e(window).width()),this.scrollableContainer.height(e(window).height())):(this.element.height()||this.element.height(this.scrollableArea.height()),this.element.width()||this.element.width("100%"),this.scrollableContainer.width(this.element.width()),this.scrollableContainer.height(this.element.height())),this.updateScrollbars()},drawScrollbar:function(t){var l=this;this.scrolling[t].handle=e("<span />").addClass("handle").hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}),this.scrolling[t].container=e("<span />").addClass("handle-container").append(this.scrolling[t].handle),this.element.prepend(e("<span />").addClass("scrollbar").addClass("scrollbar-"+t).append(this.scrolling[t].container)),e(".scrollbar-"+t+" .handle-container .handle",this.element).draggable({axis:t,containment:"parent",start:function(){l.element.addClass("scrolling")},stop:function(){l.element.removeClass("scrolling")},drag:function(e,n){l.moveArea(n.position,t)}})},updateHandleSize:function(){null!=this.scrolling.x.container&&null!=this.scrolling.y.container?(this.scrolling.x.container.parent().addClass("corner"),this.scrolling.y.container.parent().addClass("corner")):(null!=this.scrolling.x.container&&this.scrolling.x.container.parent().removeClass("corner"),null!=this.scrolling.y.container&&this.scrolling.y.container.parent().removeClass("corner"));var e=[this.scrollableContainer.width()/this.getAreaSize("width"),this.scrollableContainer.height()/this.getAreaSize("height")];null!=this.scrolling.x.container&&this.scrolling.x.handle.width(Math.round(this.scrolling.x.container.width()*e[0])),null!=this.scrolling.y.container&&this.scrolling.y.handle.height(Math.round(this.scrolling.y.container.height()*e[1]))},moveArea:function(e,t){offSetMan();var l=0;"x"==t?(l=(this.getAreaSize("width")-this.scrollableContainer.width())/(this.scrolling.x.container.width()-this.scrolling.x.handle.width()),this.scrollableArea.css("left",Math.round(e.left*l*-1))):(l=(this.getAreaSize("height")-this.scrollableContainer.height())/(this.scrolling.y.container.height()-this.scrolling.y.handle.height()),this.scrollableArea.css("top",Math.round(e.top*l*-1)))},updateArea:function(){if(null!=this.scrolling.y.container){var e=Math.round(this.getOffset("top",this.scrollableArea)/(this.scrollableContainer.height()-this.getAreaSize("height"))*100);e=e>=100?100:e;var t=Math.round((this.scrolling.y.container.height()-this.scrolling.y.handle.height())*e/100);this.scrolling.y.handle.css("top",t),100==e&&this.moveArea({top:t},"y")}else this.scrollableArea.css("top",0);if(null!=this.scrolling.x.container){var l=Math.round(this.getOffset("left",this.scrollableArea)/(this.scrollableContainer.width()-this.getAreaSize("width"))*100);l=l>=100?100:l;var n=Math.round((this.scrolling.x.container.width()-this.scrolling.x.handle.width())*l/100);this.scrolling.x.handle.css("left",n),100==l&&this.moveArea({left:n},"x")}else this.scrollableArea.css("left",0)},moveX:function(e){return null!=this.scrolling.x.handle&&(e=e+this.scrolling.x.handle.width()>=this.scrolling.x.container.width()?this.scrolling.x.container.width()-this.scrolling.x.handle.width():e,this.moveArea({left:e},"x"),this.scrolling.x.handle.css("left",e)),this},moveY:function(e){return null!=this.scrolling.y.handle&&(e=e+this.scrolling.y.handle.height()>=this.scrolling.y.container.height()?this.scrolling.y.container.height()-this.scrolling.y.handle.height():e,this.moveArea({top:e},"y"),this.scrolling.y.handle.css("top",e)),this}}),e.fn.scrollable=function(t){t=t||{};var l=this.filter("select");if(l.length>1){var i=[];return l.each(function(){i.push(n(t,e(this)))}),i}return n(t,e(this))},e.fn.scrollable.defaults={onUpdate:function(){},mouseWheel:!0,mouseWheelMaxDelta:30,autoHide:!0,transferScrolling:!0}}(jQuery);